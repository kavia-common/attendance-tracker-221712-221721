{"is_source_file": true, "format": "Dart", "description": "This Dart file defines an authentication provider for a Flutter application, managing JWT tokens, user login/signup, logout, and user info state, using SharedPreferences for token persistence.", "external_files": ["../services/api_client.dart", "../config/constants.dart", "package:flutter/foundation.dart", "package:shared_preferences/shared_preferences.dart"], "external_methods": ["ApiClient.create()", "ApiClient.create(token: _token)", "ApiPaths.signup", "ApiPaths.login", "ApiPaths.me", "SharedPreferences.getInstance()", "SharedPreferences.getString()", "SharedPreferences.setString()", "SharedPreferences.remove()"], "published": ["AuthProvider", "AuthStatus", "UserInfo"], "classes": [{"name": "AuthProvider", "description": "A ChangeNotifier that manages authentication state, including login, signup, logout, and user info.", "methods": [{"name": "_init", "description": "Initializes the auth provider by loading token and user info from persistent storage."}, {"name": "logout", "description": "Logs out the current user by removing token and clearing user info."}, {"name": "signup", "description": "Handles user signup by calling an API, storing token, and updating state."}, {"name": "login", "description": "Handles user login by calling an API, storing token, and updating state."}, {"name": "fetchMe", "description": "Fetches current user info from backend API using stored token."}, {"name": "decodeJwtPayload", "description": "Decodes the JWT token payload to extract information such as role."}], "attributes": [{"name": "status", "description": "Current authentication status (unknown, authenticated, not authenticated)."}, {"name": "_token", "description": "Stored JWT token, if any."}, {"name": "currentUser", "description": "Currently logged-in user's info (email and role)."}, {"name": "lastError", "description": "Last error message encountered during auth operations."}]}], "methods": [{"name": "_init", "description": "Initializes the auth state from persistent storage."}, {"name": "logout", "description": "Logs out the user and clears stored token."}, {"name": "signup", "description": "Signs up a new user with email, password, and role."}, {"name": "login", "description": "Logs in an existing user with email and password."}, {"name": "fetchMe", "description": "Fetches user info from backend based on stored token."}, {"name": "decodeJwtPayload", "description": "Decodes JWT token payload to extract embedded info."}], "calls": ["SharedPreferences.getInstance()", "prefs.getString('auth_token')", "prefs.setString('auth_token', token)", "prefs.remove('auth_token')", "ApiClient.create()", "ApiClient.create(token: _token)", "api.post()", "api.get()", "json.decode()", "base64Url.decode()", "utf8.decode()", "utf8.fuse(base64Url).encoder.convert()"], "search-terms": ["auth provider", "JWT token management", "Flutter authentication", "SharedPreferences", "UserInfo class", "AuthStatus enum"], "state": 2, "file_id": 23, "knowledge_revision": 47, "git_revision": "", "hash": "c86ff67f0bcb78e7377a981f395c08bd", "format-version": 4, "code-base-name": "flutter_frontend", "filename": "flutter_frontend/lib/state/auth_provider.dart", "revision_history": [{"47": ""}]}