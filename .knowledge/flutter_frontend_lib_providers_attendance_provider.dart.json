{"is_source_file": true, "format": "Dart", "description": "A Flutter provider class 'AttendanceProvider' that manages state related to class attendance tracking. It interfaces with API and realtime services to load classes, students, weekly summaries, and handle attendance toggling, with real-time updates via server-sent events (SSE).", "external_files": ["../models/attendance.dart", "../services/api_client.dart", "../services/realtime_service.dart"], "external_methods": ["ApiClient.getClasses", "ApiClient.getStudents", "ApiClient.getToday", "ApiClient.getWeekly", "ApiClient.markAttendance", "RealtimeService.connect", "RealtimeService.dispose"], "published": ["AttendanceProvider", "loadClasses", "selectClass", "loadStudents", "toggleStudentPresence", "loadWeekly", "ensureRealtimeConnected"], "classes": [{"name": "AttendanceProvider", "description": "A ChangeNotifier that manages attendance data, loading classes, students, weekly statistics, and real-time attendance updates."}], "methods": [{"name": "loadClasses", "description": "Fetches the list of classes from the API and initializes the selected class if not already set."}, {"name": "selectClass", "description": "Sets the current class, loads students and weekly data, and establishes real-time connection."}, {"name": "loadStudents", "description": "Fetches students and today's attendance state for the selected class."}, {"name": "toggleStudentPresence", "description": "Marks or unmarks a student's attendance and updates local state."}, {"name": "loadWeekly", "description": "Fetches weekly attendance aggregates for the selected class."}, {"name": "_connectRealtime", "description": "Establishes a server-sent events connection for real-time updates on attendance."}, {"name": "ensureRealtimeConnected", "description": "Explicitly connects to real-time updates, typically called after UI is rendered."}, {"name": "dispose", "description": "Cleans up subscriptions and disposes of realtime service."}], "calls": ["ApiClient.getClasses", "ApiClient.getStudents", "ApiClient.getToday", "ApiClient.getWeekly", "ApiClient.markAttendance", "RealtimeService.connect", "loadWeekly", "notifyListeners", "Future.wait", "cancel", "dispose"], "search-terms": ["AttendanceProvider", "Flutter ChangeNotifier", "attendance state management", "real-time attendance", "SSE attendance updates", "load classes students weekly", "mark student attendance", "connect to realtime"], "state": 2, "file_id": 25, "knowledge_revision": 93, "git_revision": "", "revision_history": [{"52": ""}, {"69": ""}, {"70": ""}, {"75": ""}, {"83": ""}, {"84": ""}, {"93": ""}], "hash": "16a368fdb0e1e52baa766f84f16fe7b6", "format-version": 4, "code-base-name": "flutter_frontend", "filename": "flutter_frontend/lib/providers/attendance_provider.dart"}