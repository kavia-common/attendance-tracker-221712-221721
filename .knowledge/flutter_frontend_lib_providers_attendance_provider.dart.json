{"is_source_file": true, "format": "Dart", "description": "This Dart source file defines an 'AttendanceProvider' class for managing attendance data within a Flutter application. It includes methods for loading class and student data, toggling attendance, connecting to real-time services, and notifying listeners of changes.", "external_files": ["../models/attendance.dart", "../services/api_client.dart", "../services/realtime_service.dart"], "external_methods": ["ApiClient.getClasses", "ApiClient.getStudents", "ApiClient.getToday", "ApiClient.getWeekly", "ApiClient.markAttendance", "RealtimeService.connect", "RealtimeService.dispose"], "published": ["loadClasses", "selectClass", "loadStudents", "toggleStudentPresence", "loadWeekly", "ensureRealtimeConnected"], "classes": [{"name": "AttendanceProvider", "description": "A Flutter ChangeNotifier class managing attendance data, real-time updates, and associated state for a Flutter app."}], "methods": [{"name": "loadClasses", "description": "Fetches the list of classes from the API and initializes the selected class."}, {"name": "selectClass", "description": "Sets the current class and loads related students and weekly aggregate, then connects to real-time updates."}, {"name": "loadStudents", "description": "Fetches students and their attendance status for the selected class."}, {"name": "toggleStudentPresence", "description": "Marks or unmarks a student's attendance and updates local state accordingly."}, {"name": "loadWeekly", "description": "Fetches weekly aggregate data for visualization."}, {"name": "ensureRealtimeConnected", "description": "Explicitly ensures that real-time updates are connected."}], "calls": ["notifyListeners", "await _api.getClasses", "await _api.getStudents", "await _api.getToday", "await _api.getWeekly", "await _api.markAttendance", "await _realtime.connect", "_sseSub?.cancel", "_realtime.dispose", "loadWeekly"], "search-terms": ["AttendanceProvider", "loadClasses", "selectClass", "toggleStudentPresence", "RealtimeService", "ApiClient", "Flutter attendance"], "state": 2, "file_id": 25, "knowledge_revision": 84, "git_revision": "", "revision_history": [{"52": ""}, {"69": ""}, {"70": ""}, {"75": ""}, {"83": ""}, {"84": ""}], "hash": "c2e50a9f7393618a4540d053737ac42a", "format-version": 4, "code-base-name": "flutter_frontend", "filename": "flutter_frontend/lib/providers/attendance_provider.dart"}