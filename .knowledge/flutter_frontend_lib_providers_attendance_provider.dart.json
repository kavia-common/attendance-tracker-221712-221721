{"is_source_file": true, "format": "Dart", "description": "This Dart source file defines the `AttendanceProvider` class, a state management component for a Flutter application. It manages attendance data, including fetching classes and students, updating attendance status, and handling real-time updates via server-sent events (SSE). The class provides public methods for loading data, selecting classes, toggling attendance, and subscribing to real-time events. It utilizes dependencies like `ApiClient` and `RealtimeService` to communicate with backend APIs and real-time streams.", "external_files": ["../models/attendance.dart", "../services/api_client.dart", "../services/realtime_service.dart"], "external_methods": ["ApiClient.getClasses", "ApiClient.getStudents", "ApiClient.getToday", "ApiClient.getWeekly", "ApiClient.markAttendance", "RealtimeService.connect", "RealtimeService.dispose"], "published": ["classes", "students", "selectedClass", "loading", "error", "weekly", "loadClasses", "selectClass", "loadStudents", "toggleStudentPresence", "loadWeekly"], "classes": [], "methods": [{"name": "loadClasses", "description": "Fetches the list of classes from the API and optionally initializes real-time stream for attendance updates."}, {"name": "selectClass", "description": "Sets the current class, fetches students and weekly data, and connects to real-time attendance stream."}, {"name": "loadStudents", "description": "Fetches students enrolled in the selected class along with today's attendance status."}, {"name": "toggleStudentPresence", "description": "Marks or unmarks a student's attendance and updates the local state accordingly."}, {"name": "loadWeekly", "description": "Retrieves weekly attendance aggregate data for the selected class."}, {"name": "_connectRealtime", "description": "Establishes a real-time connection to listen for attendance events for the selected class."}], "calls": ["notifyListeners", "Future.wait", "await _api.getClasses", "await _api.getStudents", "await _api.getToday", "await _api.getWeekly", "await _api.markAttendance", "await _realtime.connect", "loadWeekly", "dispose"], "search-terms": ["AttendanceProvider", "attendance stream", "class selection", "student presence toggle", "real-time attendance update", "weekly attendance data", "Flutter ChangeNotifier"], "state": 2, "file_id": 25, "knowledge_revision": 75, "git_revision": "", "revision_history": [{"52": ""}, {"69": ""}, {"70": ""}, {"75": ""}], "hash": "d8a9504ae59acf702af43e9dde7f7e2c", "format-version": 4, "code-base-name": "flutter_frontend", "filename": "flutter_frontend/lib/providers/attendance_provider.dart"}