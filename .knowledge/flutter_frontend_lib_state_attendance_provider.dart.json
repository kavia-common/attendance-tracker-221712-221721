{"is_source_file": true, "format": "Dart", "description": "This file defines data models and a provider class for managing attendance tracking, classes, sessions, and real-time updates in a Flutter app. It includes classes for ClassItem, SessionItem, AttendanceRow, and the main AttendanceProvider which handles API communication, state management, and WebSocket (realtime) event handling.", "external_files": ["package:flutter/foundation.dart", "package:intl/intl.dart", "../services/api_client.dart", "../services/realtime.dart", "../config/constants.dart"], "external_methods": ["ApiClient.create", "ApiClient.getList", "ApiClient.post", "ApiClient.postNoBody", "ApiPaths.classes", "ApiPaths.enroll", "ApiPaths.sessions", "ApiPaths.sessionAttendance", "ApiPaths.sessionMark"], "published": ["ClassItem", "SessionItem", "AttendanceRow", "AttendanceProvider"], "classes": [{"name": "ClassItem", "description": "Represents a class with id, name, and optional description. Includes a factory for creating an instance from JSON data."}, {"name": "SessionItem", "description": "Represents a session within a class with details such as start/end times and notes. Includes a factory for JSON deserialization."}, {"name": "AttendanceRow", "description": "Represents an attendance record for a student, including email and status. Includes a method for creating a copy with an updated status and a factory from JSON."}, {"name": "AttendanceProvider", "description": "Main ChangeNotifier class managing classes, sessions, attendance data, and WebSocket updates. Handles API interactions, state updates, and real-time event subscriptions."}], "methods": [{"name": "loadClasses", "description": "Loads the list of classes from the API and sets the first class as selected if none is selected."}, {"name": "createClass", "description": "Creates a new class with a name and optional description, updates the classes list."}, {"name": "enrollInClass", "description": "Enrolls the current user into a specified class."}, {"name": "loadSessionsForDate", "description": "Loads sessions for a specific class on a given date."}, {"name": "createSession", "description": "Creates a new session for a class and loads its attendance; subscribes to real-time updates."}, {"name": "loadAttendance", "description": "Loads attendance data for a specific session."}, {"name": "markAttendance", "description": "Marks a student's attendance status for a session, performs optimistic UI update."}, {"name": "subscribeRealtime", "description": "Connects to a WebSocket for real-time updates on attendance and session data."}], "calls": ["ApiClient.create", "ApiClient.getList", "ApiClient.post", "ApiClient.postNoBody", "loadAttendance", "subscribeRealtime"], "search-terms": ["AttendanceProvider", "RealtimeService", "sessionAttendance", "sessionMark", "loadClasses", "createClass", "loadSessionsForDate", "createSession", "loadAttendance", "markAttendance"], "state": 2, "file_id": 24, "knowledge_revision": 49, "git_revision": "", "hash": "414f541a8dcc055fd4f207029c4d9d27", "format-version": 4, "code-base-name": "flutter_frontend", "filename": "flutter_frontend/lib/state/attendance_provider.dart", "revision_history": [{"49": ""}]}